(self["webpackChunklagou_mobile"]=self["webpackChunklagou_mobile"]||[]).push([[846],{6216:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return D}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pay"},[e("van-cell-group",[e("van-cell",{staticClass:"course-info"},[e("img",{attrs:{src:t.course.courseImgUrl,alt:""}}),e("div",{staticClass:"price-info"},[e("div",{staticClass:"course-name",domProps:{textContent:t._s(t.course.courseName)}}),e("div",{staticClass:"discounts"},[t._v("￥"+t._s(t.course.discounts))])])]),e("van-cell",{staticClass:"account-info"},[e("div",[t._v("购买信息")]),e("div",[t._v("购买课程后使用此账号登录【拉勾教育】学习课程")]),e("div",{staticClass:"username"},[t._v("当前账号："+t._s(t.username))])]),e("van-cell",{staticClass:"pay-channel"},[e("div",[e("p",[t._v("支付方式")]),e("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[e("van-cell-group",[e("van-cell",{on:{click:function(e){t.radio=t.payInfo[1].channelCode}},scopedSlots:t._u([{key:"title",fn:function(){return[e("img",{attrs:{src:"http://www.lgstatic.com/lg-app-fed/pay/images/wechat_b787e2f4.png",alt:""}}),e("span",[t._v("微信支付")])]},proxy:!0},{key:"right-icon",fn:function(){return[e("van-radio",{attrs:{name:1}})]},proxy:!0}])}),e("van-cell",{attrs:{clickable:""},on:{click:function(e){t.radio=t.payInfo[0].channelCode}},scopedSlots:t._u([{key:"title",fn:function(){return[e("img",{attrs:{src:"http://www.lgstatic.com/lg-app-fed/pay/images/ali_ed78fdae.png",alt:""}}),e("span",[t._v("支付宝支付")])]},proxy:!0},{key:"right-icon",fn:function(){return[e("van-radio",{attrs:{name:2}})]},proxy:!0}])})],1)],1)],1),e("van-button",{on:{click:t.handlePay}},[t._v("￥"+t._s(t.course.discounts)+" 立即支付")])],1)],1)],1)},i=[],o=(a(7658),a(4916),a(5306),a(9864)),r=a(6631),s=a(6786),l=(a(541),a(9858)),c={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}},d=a(2115),u=a(8729),p=function(t){var e=t.parent,a=t.bem,n=t.role;return{mixins:[(0,d.j)(e),c],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var t=this.checkedColor||this.parent&&this.parent.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}},tabindex:function(){return this.isDisabled||"radio"===n&&!this.checked?-1:0}},methods:{onClick:function(t){var e=this,a=t.target,n=this.$refs.icon,i=n===a||n.contains(a);this.isDisabled||!i&&this.labelDisabled?this.$emit("click",t):(this.toggle(),setTimeout((function(){e.$emit("click",t)})))},genIcon:function(){var t=this.$createElement,e=this.checked,n=this.iconSize||this.parent&&this.parent.iconSize;return t("div",{ref:"icon",class:a("icon",[this.shape,{disabled:this.isDisabled,checked:e}]),style:{fontSize:(0,u.N)(n)}},[this.slots("icon",{checked:e})||t(l.Z,{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var t=this.$createElement,e=this.slots();if(e)return t("span",{class:a("label",[this.labelPosition,{disabled:this.isDisabled}])},[e])}},render:function(){var t=arguments[0],e=[this.genIcon()];return"left"===this.labelPosition?e.unshift(this.genLabel()):e.push(this.genLabel()),t("div",{attrs:{role:n,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:a([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[e])}}},h=(0,s.d)("radio"),f=h[0],g=h[1],v=f({mixins:[p({bem:g,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}}),b=(0,s.d)("radio-group"),m=b[0],y=b[1],x=m({mixins:[(0,d.G)("vanRadio"),c],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(t){this.$emit("change",t)}},render:function(){var t=arguments[0];return t("div",{class:y([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}}),k=a(4398),S=a(66),C=a(4471);const _=t=>(0,C.Z)({method:"POST",url:"/front/order/saveOrder",data:t}),w=t=>(0,C.Z)({method:"GET",url:"/front/pay/getPayInfo",params:t}),z=t=>(0,C.Z)({method:"POST",url:"/front/pay/saveOrder",data:t}),P=t=>(0,C.Z)({method:"GET",url:"/front/pay/getPayResult",headers:{"content-type":"application/json"},params:t});var I={name:"Pay",components:{VanCellGroup:o.Z,VanCell:r.Z,VanRadio:v,VanRadioGroup:x,VanButton:k.Z},props:{courseId:{type:[String,Number],required:!0}},data(){return{course:{},radio:1,orderNo:null,payInfo:{}}},created(){this.loadCourse(),this.loadOrder()},methods:{async handlePay(){const{data:t}=await z({goodsOrderNo:this.orderNo,channel:1===this.radio?"weChat":"aliPay",returnUrl:"http://edufront.lagou.com/"});window.location.href=t.content.payUrl;const e=setInterval((async()=>{const{data:a}=await P({orderNo:t.content.orderNo});a.content&&2===a.content.status&&(clearInterval(e),this.$toast.success("购买成功！"),this.$router.push({name:"learn"}))}),1e3)},async loadOrder(){const{data:t}=await _({goodsId:this.courseId});this.orderNo=t.content.orderNo;const{data:e}=await w({shopOrderNo:this.orderNo});this.payInfo=e.content.supportChannels},async loadCourse(){const{data:t}=await(0,S.Yt)({courseId:this.courseId});this.course=t.content}},computed:{username(){return this.$store.state.user.organization.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}}},Z=I,B=(a(7853),a(1001)),N=(0,B.Z)(Z,n,i,!1,null,"35285ad5",null),D=N.exports},1857:function(t,e,a){"use strict";a.r(e);var n=a(8081),i=a.n(n),o=a(3645),r=a.n(o),s=r()(i());s.push([t.id,".pay[data-v-35285ad5]{position:absolute}.pay[data-v-35285ad5],.van-cell-group[data-v-35285ad5]{width:100%;height:100%}.van-cell-group[data-v-35285ad5]{background-color:#f8f9fa;display:flex;flex-direction:column}.course-info[data-v-35285ad5]{height:170px;padding:40px 20px 0;margin-bottom:10px;box-sizing:border-box}.course-info .van-cell__value[data-v-35285ad5]{display:flex}.course-info img[data-v-35285ad5]{width:80px;height:107px;border-radius:10px}.course-info .price-info[data-v-35285ad5]{height:107px;padding:5px 20px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-between}.price-info .course-name[data-v-35285ad5]{font-size:16px}.price-info .discounts[data-v-35285ad5]{font-size:22px;font-weight:700;color:#ff7452}.account-info[data-v-35285ad5]{height:120px;margin-bottom:10px}.account-info div[data-v-35285ad5]:nth-child(2){font-size:12px;color:#999}.account-info .username[data-v-35285ad5]{margin:20px 0 10px;font-size:16px;font-family:PingFangSC-Regular,PingFang SC}.pay-channel[data-v-35285ad5]{flex:1}.pay-channel .van-cell__value[data-v-35285ad5]{display:flex;flex-direction:column;justify-content:space-between}.pay-channel .van-cell[data-v-35285ad5]{padding:20px 10px}.pay-channel .van-cell__title[data-v-35285ad5]{display:flex;align-items:center}.pay-channel .van-cell img[data-v-35285ad5]{width:28px;height:28px}.pay-channel .van-cell span[data-v-35285ad5]{font-size:16px;margin-left:10px}[data-v-35285ad5] .van-radio__icon--checked .van-icon{background-color:#fbc546;border-color:#fbc546}.pay-channel .van-button[data-v-35285ad5]{background:linear-gradient(270deg,#faa83e,#fbc546);border-radius:20px;margin-bottom:5px;font-size:18px}",""]),e["default"]=s},4398:function(t,e,a){"use strict";a(7658);var n=a(9299),i=a(8701),o=a.n(i),r=a(6786),s=a(4771),l=a(1047),c=a(2250),d=a(9858),u=a(4958),p=(0,r.d)("button"),h=p[0],f=p[1];function g(t,e,a,n){var i,r=e.tag,p=e.icon,h=e.type,g=e.color,v=e.plain,b=e.disabled,m=e.loading,y=e.hairline,x=e.loadingText,k=e.iconPosition,S={};function C(t){m||b||((0,s.j8)(n,"click",t),(0,c.fz)(n))}function _(t){(0,s.j8)(n,"touchstart",t)}g&&(S.color=v?g:"white",v||(S.background=g),-1!==g.indexOf("gradient")?S.border=0:S.borderColor=g);var w=[f([h,e.size,{plain:v,loading:m,disabled:b,hairline:y,block:e.block,round:e.round,square:e.square}]),(i={},i[l._K]=y,i)];function z(){return m?a.loading?a.loading():t(u.Z,{class:f("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}}):p?t(d.Z,{attrs:{name:p,classPrefix:e.iconPrefix},class:f("icon")}):void 0}function P(){var n,i=[];return"left"===k&&i.push(z()),n=m?x:a.default?a.default():e.text,n&&i.push(t("span",{class:f("text")},[n])),"right"===k&&i.push(z()),i}return t(r,o()([{style:S,class:w,attrs:{type:e.nativeType,disabled:b},on:{click:C,touchstart:_}},(0,s.ED)(n)]),[t("div",{class:f("content")},[P()])])}g.props=(0,n.Z)({},c.g2,{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"},iconPosition:{type:String,default:"left"}}),e["Z"]=h(g)},9864:function(t,e,a){"use strict";var n=a(8701),i=a.n(n),o=a(6786),r=a(4771),s=a(1047),l=(0,o.d)("cell-group"),c=l[0],d=l[1];function u(t,e,a,n){var o,l=t("div",i()([{class:[d(),(o={},o[s.r5]=e.border,o)]},(0,r.ED)(n,!0)]),[null==a.default?void 0:a.default()]);return e.title||a.title?t("div",[t("div",{class:d("title")},[a.title?a.title():e.title]),l]):l}u.props={title:String,border:{type:Boolean,default:!0}},e["Z"]=c(u)},7853:function(t,e,a){var n=a(1857);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var i=a(7037).Z;i("570f605e",n,!0,{sourceMap:!1,shadowMode:!1})}}]);