(self["webpackChunklagou_mobile"]=self["webpackChunklagou_mobile"]||[]).push([[846],{6216:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pay"},[t("van-cell-group",[t("van-cell",{staticClass:"course-info"},[t("img",{attrs:{src:e.course.courseImgUrl,alt:""}}),t("div",{staticClass:"price-info"},[t("div",{staticClass:"course-name",domProps:{textContent:e._s(e.course.courseName)}}),t("div",{staticClass:"discounts"},[e._v("￥"+e._s(e.course.discounts))])])]),t("van-cell",{staticClass:"account-info"},[t("div",[e._v("购买信息")]),t("div",[e._v("购买课程后使用此账号登录【拉勾教育】学习课程")]),t("div",{staticClass:"username"},[e._v("当前账号："+e._s(e.username))])]),t("van-cell",{staticClass:"pay-channel"},[t("div",[t("p",[e._v("支付方式")]),t("van-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[t("van-cell-group",[t("van-cell",{on:{click:function(t){e.radio=e.payInfo[1].channelCode}},scopedSlots:e._u([{key:"title",fn:function(){return[t("img",{attrs:{src:"http://www.lgstatic.com/lg-app-fed/pay/images/wechat_b787e2f4.png",alt:""}}),t("span",[e._v("微信支付")])]},proxy:!0},{key:"right-icon",fn:function(){return[t("van-radio",{attrs:{name:1}})]},proxy:!0}])}),t("van-cell",{attrs:{clickable:""},on:{click:function(t){e.radio=e.payInfo[0].channelCode}},scopedSlots:e._u([{key:"title",fn:function(){return[t("img",{attrs:{src:"http://www.lgstatic.com/lg-app-fed/pay/images/ali_ed78fdae.png",alt:""}}),t("span",[e._v("支付宝支付")])]},proxy:!0},{key:"right-icon",fn:function(){return[t("van-radio",{attrs:{name:2}})]},proxy:!0}])})],1)],1)],1),t("van-button",{on:{click:e.handlePay}},[e._v("￥"+e._s(e.course.discounts)+" 立即支付")])],1)],1)],1)},i=[],o=n(124),r=n(8534),s=(n(9653),n(7658),n(4916),n(5306),n(9864)),l=n(6631),c=n(6786),d=(n(541),n(9858)),u={inject:{vanField:{default:null}},watch:{value:function(){var e=this.vanField;e&&(e.resetValidation(),e.validateWithTrigger("onChange"))}},created:function(){var e=this.vanField;e&&!e.children&&(e.children=this)}},p=n(2115),h=n(8729),f=function(e){var t=e.parent,n=e.bem,a=e.role;return{mixins:[(0,p.j)(t),u],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var e=this.checkedColor||this.parent&&this.parent.checkedColor;if(e&&this.checked&&!this.isDisabled)return{borderColor:e,backgroundColor:e}},tabindex:function(){return this.isDisabled||"radio"===a&&!this.checked?-1:0}},methods:{onClick:function(e){var t=this,n=e.target,a=this.$refs.icon,i=a===n||a.contains(n);this.isDisabled||!i&&this.labelDisabled?this.$emit("click",e):(this.toggle(),setTimeout((function(){t.$emit("click",e)})))},genIcon:function(){var e=this.$createElement,t=this.checked,a=this.iconSize||this.parent&&this.parent.iconSize;return e("div",{ref:"icon",class:n("icon",[this.shape,{disabled:this.isDisabled,checked:t}]),style:{fontSize:(0,h.N)(a)}},[this.slots("icon",{checked:t})||e(d.Z,{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var e=this.$createElement,t=this.slots();if(t)return e("span",{class:n("label",[this.labelPosition,{disabled:this.isDisabled}])},[t])}},render:function(){var e=arguments[0],t=[this.genIcon()];return"left"===this.labelPosition?t.unshift(this.genLabel()):t.push(this.genLabel()),e("div",{attrs:{role:a,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:n([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[t])}}},v=(0,c.d)("radio"),g=v[0],b=v[1],m=g({mixins:[f({bem:b,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(e){(this.parent||this).$emit("input",e)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}}),x=(0,c.d)("radio-group"),y=x[0],k=x[1],S=y({mixins:[(0,p.G)("vanRadio"),u],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(e){this.$emit("change",e)}},render:function(){var e=arguments[0];return e("div",{class:k([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}}),w=n(4398),C=n(66),_=n(4471),Z=function(e){return(0,_.Z)({method:"POST",url:"/front/order/saveOrder",data:e})},z=function(e){return(0,_.Z)({method:"GET",url:"/front/pay/getPayInfo",params:e})},P=function(e){return(0,_.Z)({method:"POST",url:"/front/pay/saveOrder",data:e})},I=function(e){return(0,_.Z)({method:"GET",url:"/front/pay/getPayResult",headers:{"content-type":"application/json"},params:e})},B={name:"Pay",components:{VanCellGroup:s.Z,VanCell:l.Z,VanRadio:m,VanRadioGroup:S,VanButton:w.Z},props:{courseId:{type:[String,Number],required:!0}},data:function(){return{course:{},radio:1,orderNo:null,payInfo:{}}},created:function(){this.loadCourse(),this.loadOrder()},methods:{handlePay:function(){var e=this;return(0,r.Z)((0,o.Z)().mark((function t(){var n,a,i;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P({goodsOrderNo:e.orderNo,channel:1===e.radio?"weChat":"aliPay",returnUrl:"http://edufront.lagou.com/"});case 2:n=t.sent,a=n.data,window.location.href=a.content.payUrl,i=setInterval((0,r.Z)((0,o.Z)().mark((function t(){var n,r;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I({orderNo:a.content.orderNo});case 2:n=t.sent,r=n.data,r.content&&2===r.content.status&&(clearInterval(i),e.$toast.success("购买成功！"),e.$router.push({name:"learn"}));case 5:case"end":return t.stop()}}),t)}))),1e3);case 6:case"end":return t.stop()}}),t)})))()},loadOrder:function(){var e=this;return(0,r.Z)((0,o.Z)().mark((function t(){var n,a,i,r;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Z({goodsId:e.courseId});case 2:return n=t.sent,a=n.data,e.orderNo=a.content.orderNo,t.next=7,z({shopOrderNo:e.orderNo});case 7:i=t.sent,r=i.data,e.payInfo=r.content.supportChannels;case 10:case"end":return t.stop()}}),t)})))()},loadCourse:function(){var e=this;return(0,r.Z)((0,o.Z)().mark((function t(){var n,a;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,C.Yt)({courseId:e.courseId});case 2:n=t.sent,a=n.data,e.course=a.content;case 5:case"end":return t.stop()}}),t)})))()}},computed:{username:function(){return this.$store.state.user.organization.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}}},N=B,D=(n(7853),n(1001)),T=(0,D.Z)(N,a,i,!1,null,"35285ad5",null),$=T.exports},1857:function(e,t,n){"use strict";n.r(t);var a=n(8081),i=n.n(a),o=n(3645),r=n.n(o),s=r()(i());s.push([e.id,".pay[data-v-35285ad5]{position:absolute}.pay[data-v-35285ad5],.van-cell-group[data-v-35285ad5]{width:100%;height:100%}.van-cell-group[data-v-35285ad5]{background-color:#f8f9fa;display:flex;flex-direction:column}.course-info[data-v-35285ad5]{height:170px;padding:40px 20px 0;margin-bottom:10px;box-sizing:border-box}.course-info .van-cell__value[data-v-35285ad5]{display:flex}.course-info img[data-v-35285ad5]{width:80px;height:107px;border-radius:10px}.course-info .price-info[data-v-35285ad5]{height:107px;padding:5px 20px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-between}.price-info .course-name[data-v-35285ad5]{font-size:16px}.price-info .discounts[data-v-35285ad5]{font-size:22px;font-weight:700;color:#ff7452}.account-info[data-v-35285ad5]{height:120px;margin-bottom:10px}.account-info div[data-v-35285ad5]:nth-child(2){font-size:12px;color:#999}.account-info .username[data-v-35285ad5]{margin:20px 0 10px;font-size:16px;font-family:PingFangSC-Regular,PingFang SC}.pay-channel[data-v-35285ad5]{flex:1}.pay-channel .van-cell__value[data-v-35285ad5]{display:flex;flex-direction:column;justify-content:space-between}.pay-channel .van-cell[data-v-35285ad5]{padding:20px 10px}.pay-channel .van-cell__title[data-v-35285ad5]{display:flex;align-items:center}.pay-channel .van-cell img[data-v-35285ad5]{width:28px;height:28px}.pay-channel .van-cell span[data-v-35285ad5]{font-size:16px;margin-left:10px}[data-v-35285ad5] .van-radio__icon--checked .van-icon{background-color:#fbc546;border-color:#fbc546}.pay-channel .van-button[data-v-35285ad5]{background:linear-gradient(270deg,#faa83e,#fbc546);border-radius:20px;margin-bottom:5px;font-size:18px}",""]),t["default"]=s},4398:function(e,t,n){"use strict";n(2772),n(7658);var a=n(9299),i=n(8701),o=n.n(i),r=n(6786),s=n(4771),l=n(1047),c=n(2250),d=n(9858),u=n(4958),p=(0,r.d)("button"),h=p[0],f=p[1];function v(e,t,n,a){var i,r=t.tag,p=t.icon,h=t.type,v=t.color,g=t.plain,b=t.disabled,m=t.loading,x=t.hairline,y=t.loadingText,k=t.iconPosition,S={};function w(e){m||b||((0,s.j8)(a,"click",e),(0,c.fz)(a))}function C(e){(0,s.j8)(a,"touchstart",e)}v&&(S.color=g?v:"white",g||(S.background=v),-1!==v.indexOf("gradient")?S.border=0:S.borderColor=v);var _=[f([h,t.size,{plain:g,loading:m,disabled:b,hairline:x,block:t.block,round:t.round,square:t.square}]),(i={},i[l._K]=x,i)];function Z(){return m?n.loading?n.loading():e(u.Z,{class:f("loading"),attrs:{size:t.loadingSize,type:t.loadingType,color:"currentColor"}}):p?e(d.Z,{attrs:{name:p,classPrefix:t.iconPrefix},class:f("icon")}):void 0}function z(){var a,i=[];return"left"===k&&i.push(Z()),a=m?y:n.default?n.default():t.text,a&&i.push(e("span",{class:f("text")},[a])),"right"===k&&i.push(Z()),i}return e(r,o()([{style:S,class:_,attrs:{type:t.nativeType,disabled:b},on:{click:w,touchstart:C}},(0,s.ED)(a)]),[e("div",{class:f("content")},[z()])])}v.props=(0,a.Z)({},c.g2,{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"},iconPosition:{type:String,default:"left"}}),t["Z"]=h(v)},9864:function(e,t,n){"use strict";var a=n(8701),i=n.n(a),o=n(6786),r=n(4771),s=n(1047),l=(0,o.d)("cell-group"),c=l[0],d=l[1];function u(e,t,n,a){var o,l=e("div",i()([{class:[d(),(o={},o[s.r5]=t.border,o)]},(0,r.ED)(a,!0)]),[null==n.default?void 0:n.default()]);return t.title||n.title?e("div",[e("div",{class:d("title")},[n.title?n.title():t.title]),l]):l}u.props={title:String,border:{type:Boolean,default:!0}},t["Z"]=c(u)},7853:function(e,t,n){var a=n(1857);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var i=n(7037).Z;i("570f605e",a,!0,{sourceMap:!1,shadowMode:!1})}}]);